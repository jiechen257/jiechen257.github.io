{"title":"关于js中一些看上去简单又不会写的题","date":"2022-05-13T22:08:08.000Z","date_formatted":{"ll":"May 13, 2022","L":"05/13/2022","MM-DD":"05-13"},"link":"2022/05/13/关于js中一些看上去简单又不会写的题","comments":true,"tags":["JavaScript"],"categories":["front-end"],"updated":"2023-07-11T08:54:19.192Z","content":"<h2 id=\"x-!==-x-返回true\">x !== x 返回true<a title=\"#x-!==-x-返回true\" href=\"#x-!==-x-返回true\"></a></h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x = ? <span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (x !== x) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如果你有仔细阅读 <code>es6</code> 的教程的话，就知道这个问题是一个典型的demo</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x = <span class=\"title class_\">NaN</span> <span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (x !== x) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">NaN</span> === <span class=\"title class_\">NaN</span>) <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x !== x) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Number</span>.<span class=\"built_in\">isNaN</span>(x)) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"(!isnan(x)-&amp;&amp;-x-!==-x)-返回-true\">(!isNan(x) &amp;&amp; x !== x) 返回 true<a title=\"#(!isnan(x)-&amp;&amp;-x-!==-x)-返回-true\" href=\"#(!isnan(x)-&amp;&amp;-x-!==-x)-返回-true\"></a></h2>\n<p>现在难度提高</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x = ? <span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(!<span class=\"built_in\">isNaN</span>(x) &amp;&amp; x !== x) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>你知道 <code>Object.defineProperty()</code> 吗？</p>\n<p>请参考<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\" target=\"_blank\">Object.defineProperty() - JavaScript | MDN</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">x</span> = <span class=\"number\">0</span> <span class=\"comment\">// Any value is OK</span></span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"variable language_\">window</span>, <span class=\"string\">&#x27;x&#x27;</span>, &#123;</span><br><span class=\"line\">  get () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x) <span class=\"comment\">// 0.12259077808826002</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x === x) <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x !== x) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"如何使得-x-===-x+1\">如何使得 x === x+1<a title=\"#如何使得-x-===-x+1\" href=\"#如何使得-x-===-x+1\"></a></h2>\n<p>使用极大值  <code>Number.MAX_SAFE_INTERGER</code><br>\n参考 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER\" target=\"_blank\">Number.MAX_SAFE_INTEGER - JavaScript | MDN</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x =  <span class=\"title class_\">Number</span>.<span class=\"property\">MAX_SAFE_INTEGER</span> + <span class=\"number\">1</span><span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (x === x + <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"如何使得-x-&gt;-x\">如何使得 x &gt; x<a title=\"#如何使得-x-&gt;-x\" href=\"#如何使得-x-&gt;-x\"></a></h2>\n<p>使用 <code>Symbol.toPrimitive</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x = &#123; <span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\">  <span class=\"attr\">value</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">  [ <span class=\"title class_\">Symbol</span>.<span class=\"property\">toPrimitive</span> ] () &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;x&#x27;</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">value</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> --<span class=\"variable language_\">this</span>.<span class=\"property\">value</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (x &gt; x) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"实现-typeof-x-===-‘undefined’-&amp;&amp;-x.length-&gt;-0\">实现 typeof x === ‘undefined’ &amp;&amp; x.length &gt; 0<a title=\"#实现-typeof-x-===-‘undefined’-&amp;&amp;-x.length-&gt;-0\" href=\"#实现-typeof-x-===-‘undefined’-&amp;&amp;-x.length-&gt;-0\"></a></h2>\n<p>答案是 <code>document.all()</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> x = <span class=\"variable language_\">document</span>.<span class=\"property\">all</span> <span class=\"comment\">// Please fill in the value of &quot;x?</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> x === <span class=\"string\">&#x27;undefined&#x27;</span> &amp;&amp; x.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;hello fatfish&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> x)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x === <span class=\"literal\">undefined</span>)</span><br></pre></td></tr></table></figure>\n<p>参考 <a href=\"https://stackoverflow.com/questions/10350142/why-is-document-all-falsy/62005426\" target=\"_blank\">javascript - Why is document.all falsy? - Stack Overflow</a></p>\n","prev":{"title":"http协议的发展历程","link":"2022/05/26/http协议的发展历程"},"next":{"title":"为Vue组件添加非响应式数据","link":"2022/04/27/为Vue组件添加非响应式数据"},"plink":"https://becase.top/2022/05/13/关于js中一些看上去简单又不会写的题/","toc":[{"id":"x-!==-x-返回true","title":"x !&#x3D;&#x3D; x 返回true","index":"1"},{"id":"(!isnan(x)-&&-x-!==-x)-返回-true","title":"(!isNan(x) &amp;&amp; x !&#x3D;&#x3D; x) 返回 true","index":"2"},{"id":"如何使得-x-===-x+1","title":"如何使得 x &#x3D;&#x3D;&#x3D; x+1","index":"3"},{"id":"如何使得-x->-x","title":"如何使得 x &gt; x","index":"4"},{"id":"实现-typeof-x-===-‘undefined’-&&-x.length->-0","title":"实现 typeof x &#x3D;&#x3D;&#x3D; ‘undefined’ &amp;&amp; x.length &gt; 0","index":"5"}],"reading_time":"337 words in 2 min"}