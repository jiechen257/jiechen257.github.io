{"title":"web前端加密是否有意义","date":"2022-11-07T22:04:58.000Z","date_formatted":{"ll":"Nov 7, 2022","L":"11/07/2022","MM-DD":"11-07"},"link":"2022/11/07/web前端加密是否有意义","comments":true,"categories":["tips"],"updated":"2023-07-11T08:54:19.192Z","content":"<h2 id=\"背景\">背景<a title=\"#背景\" href=\"#背景\"></a></h2>\n<blockquote>\n<p>在 web 通信建立在 https 的基础上，是否还需要前端对用户密码的加密?</p>\n</blockquote>\n<p>有人会笑话说这不是废话吗，常识如此（我最开始看到这个问题就是这么想的)<br>\n你若再问我为什么，我不假思索就会来上一句“有助于提高系统用户的安全性”</p>\n<p>可真的能 <code>提高</code> 系统用户的安全性”吗？？</p>\n<p>先回顾一下前后端交互的几个核心诉求</p>\n<h3 id=\"前后端交互过程中的安全性诉求\">前后端交互过程中的安全性诉求<a title=\"#前后端交互过程中的安全性诉求\" href=\"#前后端交互过程中的安全性诉求\"></a></h3>\n<p>这里借用一个比喻：<br>\nAlice（ 浏览器前端 ）和 Bob（服务器后端）到底可以怎么幽会。这个问题又会涉及到以下这些问题：</p>\n<ul>\n<li>Alice 怎么知道 Bob 是 Bob？</li>\n<li>Bob 怎么知道 Alice 是 Alice?</li>\n<li>Alice 和 Bob 幽会中的 <a href=\"https://www.zhihu.com/search?q=%E7%AA%83%E7%AA%83%E7%A7%81%E8%AF%AD&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A547509246%7D\" target=\"_blank\">窃窃私语</a> 如何不被Eve偷听到，甚至被Oscar串改呢？</li>\n</ul>\n<p>前两个问题被统称归为 <code>Authenticity（认证）</code>，第三个问题可以被归为 <code>Confidentiality（保密）</code> 和 <code>Integrity</code>。</p>\n<p>对于一般人而言，以上三个问题的成熟解决方案实现现有 <code>SSH</code> 和 <code>mTLS</code> ，常用的就是是 HTTPS 即 HTTP over TLS（在 TLS 安全信道上 HTTP 通讯）</p>\n<h2 id=\"关于系统用户安全性的提升\">关于系统用户安全性的提升<a title=\"#关于系统用户安全性的提升\" href=\"#关于系统用户安全性的提升\"></a></h2>\n<p>直觉上大家都会觉得前端既然加密了，那对 <code>该网站用户认证系统</code> 的整体安全性肯定是有所帮助的，哪怕是 <code>m + n + 1</code> 的帮助也是帮助，即 <code> 用户认证安全性 = m + n + 1</code>，（先记住这个概念，后面会再用到）</p>\n<ul>\n<li>m 指后端加密</li>\n<li>这里的 n 是指传统的 htttps</li>\n<li>1 则是前端用户加密</li>\n</ul>\n<p>实际上并非如此，因为你的这个 <code>n</code> 正是从 <code>1</code> 迭代而来的，二者并没有累加的关系，而是后浪和前浪的关系，以下是解释</p>\n<h3 id=\"n-和-1-的关系\">n 和 1 的关系<a title=\"#n-和-1-的关系\" href=\"#n-和-1-的关系\"></a></h3>\n<p>先看案例：</p>\n<ol>\n<li>如果某一天，这个系统的数据库泄露了，黑客就直接拿到了每个用户的密码 <code>md5 值 </code></li>\n<li>但此时，由于黑客知道密码是在前端进行哈希的，所以他不需要爆破出该 md5 对应的原文是什么，而是直接修改客户端向服务器发出的请求，把密码字段换成数据库中 MD5 就可以了</li>\n<li>由于与数据库中记录一致，直接就会登录成功。这跟 <strong>直接存储</strong> <code>明文密码</code> <strong>没有任何区别！！</strong></li>\n</ol>\n<p>在这个类似中间人攻击的案例中，我们再分析 n 和 1 的实际映射对象</p>\n<ul>\n<li><code>n</code> 指对信息传输通道所做的操作，可以是 https 加密传输等其他任何传输方式</li>\n<li><code>1</code> 指对信息发送源头所做的操作，可以是前端对密文做的一切加密操作</li>\n</ul>\n<p>再来看案例中黑客如何爆破这个系统的，他无视掉了 <code>1</code>（对信息发送源头所做的操作），仅仅是干掉了 <code>n</code>（即信息传输通道所做的操作）这一操作，就干掉了这个认证系统<br>\n——即此时认证系统的安全性完全取决于 <code>n</code></p>\n<p>因此，这个公式应该变成 <code> 用户认证安全性 = m + n</code></p>\n<p>针对这些，现代密码学有一些“反常识”的方法，也能加强这一理解</p>\n<h3 id=\"现代密码学\">现代密码学<a title=\"#现代密码学\" href=\"#现代密码学\"></a></h3>\n<p>1.A 可以向 B 证明自己拥有一个密码，但是如果 B 是假冒的验证者，A 不会透露关于密码的任何信息给 B。——“零知识证明”</p>\n<p>2.A 可以和 B 比较自己持有的一个值的大小关系，而不泄露这个值给对方。——“百万富翁问题”</p>\n<p>3.A 可以给 B 发来的一段信息进行 <a href=\"https://www.zhihu.com/search?q=%E7%94%B5%E5%AD%90%E7%AD%BE%E5%90%8D&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A539557939%7D\" target=\"_blank\">电子签名</a> ，而不知道信息的内容。——“ <a href=\"https://www.zhihu.com/search?q=%E7%9B%B2%E7%AD%BE%E5%90%8D&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A539557939%7D\" target=\"_blank\">盲签名</a> ”</p>\n<p>4.A 和 B 可以，在没有公正第三人的情况下，进行等概率胜负的博弈。——“电 <a href=\"https://www.zhihu.com/search?q=%E5%AD%90%E5%8D%9A%E5%BC%88&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A539557939%7D\" target=\"_blank\">子博弈</a> ”</p>\n<p>5.邮件服务，如果不考虑法律风险的话，是可以做到让服务器看不到你的邮件内容的。——PGP</p>\n<h3 id=\"对用户认证系统安全性并没有帮助\">对用户认证系统安全性并没有帮助<a title=\"#对用户认证系统安全性并没有帮助\" href=\"#对用户认证系统安全性并没有帮助\"></a></h3>\n<p>以上，我们可以明确前端密码加密对用户认证系统安全性 <code>并没有帮助</code></p>\n<p>有些人会认为前端进行了加密，可以降低后台的安全性需求，这种错误的观念会造成系统的 <code>安全漏洞</code></p>\n<p>实际上，我们不能对前端做任何的假设，所有跟安全相关的技术，都必须应用在传输通道和后台上</p>\n<h2 id=\"其他意义\">其他意义<a title=\"#其他意义\" href=\"#其他意义\"></a></h2>\n<p>如果跳出系统用户安全性的这个范围，前端对密码加密还是有一定意义的</p>\n<p>主要是防止这个网站用户密码破解后，被黑客拿去 <code>撞库</code>， 去验证用户在其他平台的账号</p>\n<p>你可能又会问，这不也是加强安全性了吗？不是，这是 <code>社会工程学</code> 上的意义</p>\n<p>每个网站自己的 <code>用户认证安全性</code> 与其他网站的安全性应当是独立的，这只能防止被窃听到原文的密码被攻击者用在社会学攻击上，而不能改善该网站的安全性</p>\n<h2 id=\"结论\">结论<a title=\"#结论\" href=\"#结论\"></a></h2>\n<p>回到一开始的问题，答案是：Web 前端密码加密没有意义，又有意义</p>\n<p>这个意义跟多数开发者所想的并不一致，它并不能改善该网站的安全性，它体现在社会工程学上</p>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<p><a href=\"https://www.zhihu.com/question/25539382\" target=\"_blank\"> Web 前端密码加密是否有意义？</a></p>\n","prev":{"title":"esbuild 为什么快","link":"2022/11/18/esbuild为什么快"},"next":{"title":"关于图灵完备","link":"2022/11/03/关于图灵完备"},"plink":"https://becase.top/2022/11/07/web前端加密是否有意义/","toc":[{"id":"背景","title":"背景","index":"1","children":[{"id":"前后端交互过程中的安全性诉求","title":"前后端交互过程中的安全性诉求","index":"1.1"}]},{"id":"关于系统用户安全性的提升","title":"关于系统用户安全性的提升","index":"2","children":[{"id":"n-和-1-的关系","title":"n 和 1 的关系","index":"2.1"},{"id":"现代密码学","title":"现代密码学","index":"2.2"},{"id":"对用户认证系统安全性并没有帮助","title":"对用户认证系统安全性并没有帮助","index":"2.3"}]},{"id":"其他意义","title":"其他意义","index":"3"},{"id":"结论","title":"结论","index":"4"},{"id":"参考","title":"参考","index":"5"}],"reading_time":"1404 words in 9 min"}